<!DOCTYPE html>
<html lang="en">
<head>
  {% if user.is_authenticated %}
    <script>
      window.currentUsername = "{{ user.username }}";
    </script>
  {% else %}
    <script>
      window.currentUsername = null;
    </script>
  {% endif %}

  {% load static %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proxyjeza</title>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("jQuery version:", $.fn.jquery);
    });
  </script>
  
  <!-- 2️⃣ Charger Magnific Popup et Flexslider juste après jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/flexslider/2.7.2/jquery.flexslider-min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("MagnificPopup loaded?", typeof $.fn.magnificPopup);
    });
  </script>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <script>
    $(document).ready(function() {
      console.log("jQuery version:", $.fn.jquery);
      console.log("MagnificPopup:", typeof $.magnificPopup);
    });
  </script>
        
{% if request.path != "/chat/" %}
    {% include 'chat.html' %}
{% endif %}
<script src="{% static 'js/chat.js' %}"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        updateUserInfo();
    });
</script>
<!-- Styles du template -->
<link rel="stylesheet" href="{% static 'css/animate.css' %}">
<link rel="stylesheet" href="{% static 'css/flexslider.css' %}">
<link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link rel="stylesheet" href="{% static 'css/custom.css' %}">
</head>
<!-- Scripts du template -->
<script src="{% static 'javascript/main.js' %}"></script>
<script src="{% static 'javascript/jquery.cookie.js' %}"></script>
<script src="{% static 'javascript/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'javascript/magnific-popup-options.js' %}"></script>

<body>
  {% include 'header.html' %}
  <div id="app" class="container-fluid">
    <div id="content">
      {% block content %}
        {% if initial_fragment %}
          {% include initial_fragment %}
        {% endif %}
      {% endblock %}
    </div>
  </div>
  <script src="{% static 'js/app.js' %}"></script>
  <script src="{% static 'js/register.js' %}"></script>
  <!-- Charger tournaments.js globalement -->
  <script src="{% static 'js/tournaments.js' %}"></script>
  {% block extra_scripts %}{% endblock %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  {% include 'footer.html' %}
</body>
</html>
