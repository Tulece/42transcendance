<!-- Live chat -->
<div id="chat-wrapper" 
     class="position-fixed bottom-0 end-0 p-3"
     style="z-index:999; display:none;"> <!-- Maybe retirer le z-index:999 !!!-->

  <div class="card h-100 shadow-lg d-flex flex-column">
    <div class="card-header d-flex justify-content-between align-items-center bg-dark text-white">
      <h5 class="mb-0">Live Chat & Utilisateurs</h5>
      <button id="chat-toggle" class="btn btn-sm btn-light">Réduire</button>
    </div>

    <div class="card-body d-flex p-0" style="overflow: hidden;">
      <!-- Liste des utilisateurs -->
      <div id="user-list-container" class="border-end" style="width: 270px; overflow-y: auto;">
        <div class="p-2">
          <h5 class="mb-3">Utilisateurs connectés</h5>

          <h6 class="mb-2">Amis connectés</h6>
          <ul id="friends-connected" class="list-group mb-3"></ul>

          <h6 class="mb-2">Autres connectés</h6>
          <ul id="others-connected" class="list-group"></ul>
        </div>
      </div>

      <!-- Zone de chat -->
      <div id="chat-container" class="flex-grow-1 d-flex flex-column" style="min-width: 0;">
        <div id="message-area" class="flex-grow-1 p-3 overflow-auto" style="background-color: #f8f9fa;">
          <div id="message-list"></div>
        </div>

        <div class="card-footer">
          <div class="input-group mb-2">
              <input type="text" id="message-input" class="form-control" placeholder="Entrez votre message...">
              <button id="send-message-btn" class="btn btn-primary">Envoyer</button>
          </div>
          <div class="input-group">
              <select id="private-recipient" class="form-select">
                  <option value="" disabled selected>Choisir un destinataire</option>
              </select>
              <button id="send-private-btn" class="btn btn-secondary">Envoyer privé</button>
              <button id="invite-to-game-btn" class="btn btn-warning">Inviter au Pong</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<style>

/* Styles "par défaut" (Desktop first) > Check si conflict with Boostrap ?*/
#user-list-container {
  /* width: 240px;
  height: 450px; */
  overflow:hidden;
  position: relative;
  /* z-index: 1050; */
  /* transition: transform 0.3s ease-in-out; Animation when change its state */
  /* transform: translateY(0); */
}

#user-list-container .card-body {
  max-height: 350px;
  overflow-y: auto;
}

#chat-container {
  /* width: 450px;
  height: 450px; */
  overflow: hidden;
  /* transition: transform 0.3s ease-in-out; */
  /* transform: translateY(0); État "ouvert" */
}

#chat-wrapper {
  width: 700px;
  height: 450px;
  position: fixed; bottom:0; right:0;
  z-index: 999; /* Check if useful or not (devient prio sur l'affichage) */
  transition: transform 0.3s ease-in-out;
  transform: translateY(0);
}

#chat-wrapper.collapsed {
  transform: translateY(calc(100% - 60px));
}

#user-list-container, #chat-container {
  max-width: 70vw;
  max-height: 80vh;
}

@media (max-width: 1200px) {
  #chat-wrapper {
    width: 500px;
    height: 400px;
  }
}

@media (max-width: 992px) {
  #chat-wrapper {
    width: 450px;
    height: 350px;
  }
}

@media (max-width: 768px) {
  #chat-wrapper {
    width: 400px;
    height: 300px;
  }
}

@media (max-width: 576px) {
  #chat-wrapper {
    width: 350px;
    height: 250px;
  }
}


#message-area {
  background-color: #f8f9fa;
  border-top: 1px solid #ddd;
}
.message {
  margin-bottom: 5px;
  padding: 4px;
  border-radius: 5px;
  font-size: 14px;
}
.message .username {
  font-weight: bold;
}
.message.system {
  color: #999;
  font-style: italic;
}


.error-message {
  color: red;
  font-weight: bold;
  padding: 5px;
  border: 1px solid red;
  background-color: #ffe6e6;
  border-radius: 4px;
  margin-bottom: 5px;
}

.custom-padding {
  padding: 12px 20px;
  margin: 5px;
}

.list-group-item.d-flex {
  flex-wrap: wrap; 
}

.badge {
  font-size: 0.75rem;
  padding: 3px 6px;
  border-radius: 50%;
}

</style>